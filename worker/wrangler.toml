# Amber Worker Configuration

name = "amber-worker"
main = "src/index.ts"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "amber"
database_id = "f688021b-a986-495a-94bb-352354768a22"

# R2 Bucket
[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "grove-storage"  # Run: wrangler r2 bucket create grove-storage

# Cron Triggers
[triggers]
crons = ["0 3 * * *"]  # Daily at 3 AM UTC

# Environment-specific settings
[env.production]
name = "amber-worker"
routes = [
  { pattern = "amber-api.grove.place/*", zone_name = "grove.place" }
]

[env.staging]
name = "amber-worker-staging"
